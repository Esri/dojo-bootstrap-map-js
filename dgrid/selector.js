//>>built
define("dgrid/selector","dojo/_base/kernel dojo/_base/array dojo/on dojo/aspect dojo/_base/sniff put-selector/put".split(" "),function(t,u,x,p,v,m){return function(b,e){function q(d){return!a.allowSelect(a.row(d))}function n(d){return function(c){var h=c.rows,g=h.length;c="false";var f;for(f=0;f<g;f++){var e=a.cell(h[f],b.id).element;if(e&&(e=(e.contents||e).input)&&!e.disabled)e.checked=d,e.setAttribute("aria-checked",d)}if("checkbox"==k.type){h=a.selection;g=!1;for(f in h)if(h[f]!=a.allSelected){g=
!0;break}k.indeterminate=g;k.checked=a.allSelected;g?c="mixed":a.allSelected&&(c="true");k.setAttribute("aria-checked",c)}}}function w(d){if("click"==d.type||32==d.keyCode||!v("opera")&&13==d.keyCode||0===d.keyCode){var c=a.row(d),b=a._lastSelected&&a.row(a._lastSelected);a._selectionTriggerEvent=d;if("radio"==e){if(!b||b.id!=c.id)a.clearSelection(),a.select(c,null,!0),a._lastSelected=c.element}else c?(d.shiftKey?n(!0)({rows:[c]}):b=null,b=d.shiftKey?b:null,a.select(b||c,c,b?void 0:null),a._lastSelected=
c.element):(m(this,(a.allSelected?"!":".")+"dgrid-select-all"),a[a.allSelected?"clearSelection":"selectAll"]());a._selectionTriggerEvent=null}}function r(){a._hasSelectorInputListener=!0;l.push(a.on(".dgrid-selector:click,.dgrid-selector:keydown",w));var d=a._handleSelect;a._handleSelect=function(a){this.cell(a).column!=b&&d.apply(this,arguments)};if("function"==typeof b.disabled){var c=a.allowSelect,e=b.disabled;a.allowSelect=function(a){var d=c.call(this,a);return e===q?d:d&&!e.call(b,a.data)}}b.disabled=
q;l.push(a.on("dgrid-select",n(!0)));l.push(a.on("dgrid-deselect",n(!1)))}var l=[],a,k;b||(b={});b.type&&(b.selectorType=b.type,t.deprecated("columndef.type","use columndef.selectorType instead","dgrid 0.4"));b.selectorType=e=e||b.selectorType||"checkbox";b.sortable=!1;var s="function"==typeof e?e:function(d,c,h){var g=c.parentNode,f;a._hasSelectorInputListener||r();f=b.disabled;m(g&&g.contents?g:c,".dgrid-selector");c=c.input||(c.input=m(c,"input[type\x3d"+e+"]",{tabIndex:isNaN(b.tabIndex)?-1:b.tabIndex,
disabled:f&&("function"==typeof f?f.call(b,h):f),checked:d}));c.setAttribute("aria-checked",!!d);return c};p.after(b,"init",function(){a=b.grid});p.after(b,"destroy",function(){u.forEach(l,function(a){a.remove()});a._hasSelectorInputListener=!1});b.renderCell=function(b,c,e,g,f){c=(c=b&&a.row(b))&&a.selection[c.id];s(c,e,b)};b.renderHeaderCell=function(d){var c="label"in b?b.label:b.field||"";"radio"==e||!a.allowSelectAll?(d.appendChild(document.createTextNode(c)),a._hasSelectorInputListener||r()):
s(!1,d,{});k=d.lastChild};return b}});
//@ sourceMappingURL=selector.js.map