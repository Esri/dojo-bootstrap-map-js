//>>built
define("dojox/mvc/_atBindingMixin","dojo/_base/array dojo/_base/lang dojo/_base/declare dojo/has dojo/Stateful ./resolve ./sync".split(" "),function(r,p,e,n,u,s,v){function w(a){var b;try{b=require("dijit/registry")}catch(d){return}for(a=a.domNode&&a.domNode.parentNode;a;){if(a=b.getEnclosingWidget(a)){var c=a._relTargetProp||"target";if((p.isFunction(a.get)?a.get(c):a[c])||c in a.constructor.prototype)return a}a=a&&a.domNode.parentNode}}function q(a,b,d,c,g){function t(){h.Two&&h.Two.unwatch();delete h.Two;
var k=f&&(p.isFunction(f.get)?f.get(e):f[e]),m=s(a,k),k=s(d,k);n("mvc-bindings-log-api")&&(!m||/^rel:/.test(a));n("mvc-bindings-log-api")&&(!k||/^rel:/.test(d));if(m&&k&&(!/^rel:/.test(a)&&!/^rel:/.test(d)||f))(!m.set||!m.watch)&&"*"==b?n("mvc-bindings-log-api"):null==b?(p.isFunction(k.set)?k.set(c,m):k[c]=m,n("mvc-bindings-log-api")):h.Two=v(m,b,k,c,g)}var h={},f=w(d),e=f&&f._relTargetProp||"target";t();if(f&&/^rel:/.test(a)||/^rel:/.test(d)&&p.isFunction(f.set)&&p.isFunction(f.watch))h.rel=f.watch(e,
function(a,b,c){b!==c&&(n("mvc-bindings-log-api"),t())});var l={};l.unwatch=l.remove=function(){for(var a in h)h[a]&&h[a].unwatch(),delete h[a]};return l}n("mvc-bindings-log-api");var l={dataBindAttr:"data-mvc-bindings",_dbpostscript:function(a,b){var d=this._refs=(a||{}).refs||{},c;for(c in a)if("dojox.mvc.at"==(a[c]||{}).atsignature){var g=a[c];delete a[c];d[c]=g}var g=new u,e=this;g.toString=function(){return"[Mixin value of widget "+e.declaredClass+", "+(e.id||"NO ID")+"]"};g.canConvertToLoggable=
!0;this._startAtWatchHandles(g);for(c in d)void 0!==g[c]&&((a=a||{})[c]=g[c]);this._stopAtWatchHandles()},_startAtWatchHandles:function(a){this.canConvertToLoggable=!0;var b=this._refs;if(b){var d=this._atWatchHandles=this._atWatchHandles||{};this._excludes=null;for(var c in b)b[c]&&"*"!=c&&(d[c]=q(b[c].target,b[c].targetProp,a||this,c,{bindDirection:b[c].bindDirection,converter:b[c].converter,equals:b[c].equalsCallback}));if("dojox.mvc.at"==(b["*"]||{}).atsignature)d["*"]=q(b["*"].target,b["*"].targetProp,
a||this,"*",{bindDirection:b["*"].bindDirection,converter:b["*"].converter,equals:b["*"].equalsCallback})}},_stopAtWatchHandles:function(){for(var a in this._atWatchHandles)this._atWatchHandles[a].unwatch(),delete this._atWatchHandles[a]},_setAtWatchHandle:function(a,b){if("ref"==a)throw Error(this+": 1.7 ref syntax used in conjuction with 1.8 dojox/mvc/at syntax, which is not supported.");var d=this._atWatchHandles=this._atWatchHandles||{};d[a]&&(d[a].unwatch(),delete d[a]);this._excludes=this[a]=
null;this._started?d[a]=q(b.target,b.targetProp,this,a,{bindDirection:b.bindDirection,converter:b.converter,equals:b.equalsCallback}):this._refs[a]=b},_setBind:function(a){a=eval("({"+a+"})");for(var b in a){var d=a[b];"dojox.mvc.at"==(d||{}).atsignature&&this._setAtWatchHandle(b,d)}},_getExcludesAttr:function(){if(this._excludes)return this._excludes;var a=[],b;for(b in this._atWatchHandles)"*"!=b&&a.push(b);return a},_getPropertiesAttr:function(){if(this.constructor._attribs)return this.constructor._attribs;
var a=["onClick"].concat(this.constructor._setterAttrs);r.forEach(["id","excludes","properties","ref","binding"],function(b){b=r.indexOf(a,b);0<=b&&a.splice(b,1)});return this.constructor._attribs=a}};l[l.dataBindAttr]="";e=e("dojox/mvc/_atBindingMixin",null,l);e.mixin=l;return e});
//@ sourceMappingURL=_atBindingMixin.js.map