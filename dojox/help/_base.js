//>>built
define("dojox/help/_base",["dojo","dijit","dojox","dojo/require!dojox/rpc/Service,dojo/io/script"],function(c,q,a){c.provide("dojox.help._base");c.require("dojox.rpc.Service");c.require("dojo.io.script");c.experimental("dojox.help");a.help={locate:function(e,b,k){k=k||20;var f=[],h={},g;if(b){c.isArray(b)||(b=[b]);for(var d=0,l;l=b[d];d++){g=l;if(c.isString(l)){if(l=c.getObject(l),!l)continue}else if(c.isObject(l))g=l.__name__;else continue;f.push(l);g&&(g=g.split(".")[0],!h[g]&&-1==c.indexOf(a.help._namespaces,
g)&&a.help.refresh(g),h[g]=!0)}}f.length||(f.push({__name__:"window"}),c.forEach(a.help._namespaces,function(a){h[a]=!0}));e=e.toLowerCase();b=[];d=0;a:for(;l=f[d];d++){var n=l.__name__||"";g=c.some(f,function(a){a=a.__name__||"";return 0==n.indexOf(a+".")});if(n&&!g){g=n.split(".")[0];l=[];if("window"==n)for(g in a.help._names)c.isArray(a.help._names[g])&&(l=l.concat(a.help._names[g]));else l=a.help._names[g];g=0;for(var m;m=l[g];g++)if(("window"==n||0==m.indexOf(n+"."))&&-1!=m.toLowerCase().indexOf(e)&&
".prototype"!=m.slice(-10)){var p=c.getObject(m);if(p&&(b.push([m,p]),b.length==k))break a}}}a.help._displayLocated(b);if(!c.isMoz)return""},refresh:function(e,b){2>arguments.length&&(b=!0);a.help._recurse(e,b)},noConflict:function(e){if(arguments.length)return a.help._noConflict(e);for(;a.help._overrides.length;){var b=a.help._overrides.pop(),c=b[0],b=b[1];c[b]=a.help._noConflict(c[b])}},init:function(e,b){e&&a.help._namespaces.concat(e);c.addOnLoad(function(){c.require=function(e){return function(){a.help.noConflict();
e.apply(c,arguments);a.help._timer&&clearTimeout(a.help._timer);a.help._timer=setTimeout(function(){c.addOnLoad(function(){a.help.refresh();a.help._timer=!1})},500)}}(c.require);a.help._recurse()})},_noConflict:function(a){if(a instanceof String)return a.toString();if(a instanceof Number)return+a;if(a instanceof Boolean)return!0==a;c.isObject(a)&&(delete a.__name__,delete a.help);return a},_namespaces:["dojo","dojox","dijit","djConfig"],_rpc:new a.rpc.Service(c.moduleUrl("dojox.rpc.SMDLibrary","dojo-api.smd")),
_attributes:["summary","type","returns","parameters"],_clean:function(e){for(var b={},c=0,f;f=a.help._attributes[c];c++){var h=e["__"+f+"__"];h&&(b[f]=h)}return b},_displayLocated:function(a){throw Error("_displayLocated should be overridden in one of the dojox.help packages");},_displayHelp:function(a,b){throw Error("_displayHelp should be overridden in one of the dojox.help packages");},_addVersion:function(a){if(a.name){a.version=[c.version.major,c.version.minor,c.version.patch].join(".");var b=
a.name.split(".");if("dojo"==b[0]||"dijit"==b[0]||"dojox"==b[0])a.project=b[0]}return a},_stripPrototype:function(a){var b=a.replace(/\.prototype(\.|$)/g,"."),c=b;"."==b.slice(-1)?c=b=b.slice(0,-1):b=a;return[c,b]},_help:function(){for(var e=a.help._stripPrototype(this.__name__)[0],b=[],k=0,f;f=a.help._attributes[k];k++)this["__"+f+"__"]||b.push(f);a.help._displayHelp(!0,{name:this.__name__});!b.length||this.__searched__?a.help._displayHelp(!1,a.help._clean(this)):(this.__searched__=!0,a.help._rpc.get(a.help._addVersion({name:e,
exact:!0,attributes:b})).addCallback(this,function(b){this.toString===a.help._toString&&this.toString(b);if(b&&b.length){b=b[0];for(var c=0,d;d=a.help._attributes[c];c++)b[d]&&(this["__"+d+"__"]=b[d]);a.help._displayHelp(!1,a.help._clean(this))}else a.help._displayHelp(!1,!1)}));if(!c.isMoz)return""},_parse:function(c){delete this.__searching__;if(c&&c.length){if(c=c[0].parameters){var b=["function ",this.__name__,"("];this.__parameters__=c;for(var k=0,f;f=c[k];k++){k&&b.push(", ");b.push(f.name);
if(f.types){for(var h=[],g=0,d;d=f.types[g];g++)h.push(d.title);h.length&&(b.push(": "),b.push(h.join("|")))}f.repeating&&b.push("...");f.optional&&b.push("?")}b.push(")");this.__source__=this.__source__.replace(/function[^\(]*\([^\)]*\)/,b.join(""))}this.__output__&&delete this.__output__}else a.help._displayHelp(!1,!1)},_toStrings:{},_toString:function(e){if(!this.__source__)return this.__name__;var b=!this.__parameters__;this.__parameters__=[];e?a.help._parse.call(this,e):b&&(this.__searching__=
!0,a.help._toStrings[a.help._stripPrototype(this.__name__)[0]]=this,a.help._toStringTimer&&clearTimeout(a.help._toStringTimer),a.help._toStringTimer=setTimeout(function(){a.help.__toString()},50));if(!b||!this.__searching__)return this.__source__;var k="function Loading info for "+this.__name__+"... (watch console for result) {}";return!c.isMoz?(this.__output__=!0,k):{toString:c.hitch(this,function(){this.__output__=!0;return k})}},__toString:function(){a.help._toStringTimer&&clearTimeout(a.help._toStringTimer);
var c=[];a.help.noConflict(a.help._toStrings);for(var b in a.help._toStrings)c.push(b);for(;c.length;)a.help._rpc.batch(a.help._addVersion({names:c.splice(-50,50),exact:!0,attributes:["parameters"]})).addCallback(this,function(b){for(var c=0,e;e=b[c];c++){var g=a.help._toStrings[e.name];g&&(a.help._parse.call(g,[e]),delete a.help._toStrings[e.name])}})},_overrides:[],_recursions:[],_names:{},_recurse:function(e,b){2>arguments.length&&(b=!0);var k=[];if(e&&c.isString(e))a.help.__recurse(c.getObject(e),
e,e,k,b);else for(var f=0,h;h=a.help._namespaces[f];f++)window[h]&&(a.help._recursions.push([window[h],h,h]),window[h].__name__=h,window[h].help||(window[h].help=a.help._help));for(;a.help._recursions.length;)f=a.help._recursions.shift(),a.help.__recurse(f[0],f[1],f[2],k,b);for(f=0;h=k[f];f++)delete h.__seen__},__recurse:function(e,b,k,f,h){for(var g in e)if(!g.match(/([^\w_.$]|__[\w_.$]+__)/)){var d=e[g];if(!("undefined"==typeof d||d===document||d===window||d===a.help._toString||d===a.help._help||
null===d||+c.isIE&&d.tagName||d.__seen__)){var l=c.isFunction(d),n=c.isObject(d)&&!c.isArray(d)&&!d.nodeType,m=k?k+"."+g:g;if("dojo._blockAsync"!=m){if(!d.__name__){var p=null;c.isString(d)?p=String:"number"==typeof d?p=Number:"boolean"==typeof d&&(p=Boolean);p&&(d=e[g]=new p(d))}d.__seen__=!0;d.__name__=m;(a.help._names[b]=a.help._names[b]||[]).push(m);f.push(d);l||a.help._overrides.push([e,g]);(l||n)&&h&&a.help._recursions.push([d,b,m]);l&&(d.__source__||(d.__source__=d.toString().replace(/^function\b ?/,
"function "+m)),d.toString===Function.prototype.toString&&(d.toString=a.help._toString));d.help||(d.help=a.help._help)}}}}}});
//@ sourceMappingURL=_base.js.map