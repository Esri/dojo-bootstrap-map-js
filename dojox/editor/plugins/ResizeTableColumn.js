//>>built
define("dojox/editor/plugins/ResizeTableColumn",["dojo","dijit","dojox","./TablePlugins"],function(c,u,A,z){var r=c.declare("dojox.editor.plugins.ResizeTableColumn",z,{constructor:function(){this.isLtr=this.dir?"ltr"==this.dir:c._isBodyLtr();this.ruleDiv=c.create("div",{style:"top: -10000px; z-index: 10001"},c.body(),"last")},setEditor:function(n){function p(a,e){var b=c.query("\x3e td",a.parentNode);switch(e){case "first":return b[0]==a;case "last":return b[b.length-1]==a;default:return!1}}function r(a){for(a=
a.nextSibling;a&&!(a.tagName&&"td"==a.tagName.toLowerCase());)a=a.nextSibling;return a}function s(a){for(;(a=a.parentNode)&&"table"!=a.tagName.toLowerCase(););return a}function x(a){for(var e=c.query("td",s(a)),b=e.length,d=0;d<b;d++)if(c.position(e[d]).x==c.position(a).x)return e[d];return null}function t(a,e){function b(a,b){if(!b)return 0;if("medium"==b)return 1;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);with(a){var c=style.left,d=runtimeStyle.left;runtimeStyle.left=currentStyle.left;try{style.left=
b,b=style.pixelLeft}catch(e){b=0}style.left=c;runtimeStyle.left=d}return b}if(c.isIE){var d=a.currentStyle,f=b(a,d.borderLeftWidth),g=b(a,d.borderRightWidth),h=b(a,d.paddingLeft),d=b(a,d.paddingRight);a.style.width=e-f-g-h-d}else c.marginBox(a,{w:e})}var h=this.ruleDiv;this.editor=n;this.editor.customUndo=!0;this.onEditorLoaded();n.onLoadDeferred.addCallback(c.hitch(this,function(){this.connect(this.editor.editNode,"onmousemove",function(a){var e=c.position(n.iframe,!0),b=e.x,d=a.clientX;if(this.isDragging){var f=
this.activeCell;a=c.position(f);e=a.x;a=a.w;var g=r(f),l,k,m=c.position(s(f).parentNode),f=m.x,m=m.w;g&&(l=c.position(g),k=l.x,l=l.w);(this.isLtr&&(h.headerColumn&&g&&f<d&&d<e+a||!g&&e<d&&d<f+m||g&&e<d&&d<k+l)||!this.isLtr&&(h.headerColumn&&g&&f>d&&d>e||!g&&e+a>d&&d>f||g&&e+a>d&&d>k))&&c.style(h,{left:b+d+"px"})}else if(k=a.target,k.tagName&&"td"==k.tagName.toLowerCase()){l=c.position(k);a=l.x;g=l.w;b=b+l.x-2;if(this.isLtr){if(h.headerColumn=!0,!p(k,"first")||d>a+g/2)b+=g,h.headerColumn=!1}else h.headerColumn=
!1,p(k,"first")&&d>a+g/2&&(b+=g,h.headerColumn=!0);c.style(h,{position:"absolute",cursor:"col-resize",display:"block",width:"4px",backgroundColor:"transparent",top:e.y+l.y+"px",left:b+"px",height:l.h+"px"});this.activeCell=k}else c.style(h,{display:"none",top:"-10000px"})});this.connect(h,"onmousedown",function(a){var e=c.position(n.iframe,!0),b=c.position(s(this.activeCell));this.isDragging=!0;c.style(n.editNode,{cursor:"col-resize"});c.style(h,{width:"1px",left:a.clientX+"px",top:e.y+b.y+"px",height:b.h+
"px",backgroundColor:"#777"})});this.connect(h,"onmouseup",function(a){var e=this.activeCell,b=c.position(e),d=b.w,f=b.x,b=r(e),g,l,k=c.position(n.iframe).x,m=s(e),u=c.position(m),q=m.getAttribute("cellspacing");a=a.clientX;var y=x(e),v,w;if(!q||0>(q=parseInt(q,10)))q=2;b&&(g=c.position(b),l=g.x,g=g.w,v=x(b));this.isLtr?h.headerColumn?f=k+f+d-a:(f=a-k-f,b&&(w=k+l+g-a-q)):h.headerColumn?f=a-k-f:(f=k+f+d-a,b&&(w=a-k-l-q));this.isDragging=!1;t(y,f);b&&(h.headerColumn||t(v,w));(h.headerColumn&&p(e,"first")||
p(e,"last"))&&c.marginBox(m,{w:u.w+f-d});t(y,c.position(e).w);b&&t(v,c.position(b).w);c.style(n.editNode,{cursor:"auto"});c.style(h,{display:"none",top:"-10000px"});this.activeCell=null})}))}});c.subscribe(u._scopeName+".Editor.getPlugin",null,function(c){if(!c.plugin&&c.args&&c.args.command){var p=c.args.command.charAt(0).toLowerCase()+c.args.command.substring(1,c.args.command.length);"resizeTableColumn"==p&&(c.plugin=new r({commandName:p}))}});return r});
//@ sourceMappingURL=ResizeTableColumn.js.map