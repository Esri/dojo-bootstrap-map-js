//>>built
define("dojox/jsonPath/query",["dojo","dijit","dojox"],function(q,w,n){q.provide("dojox.jsonPath.query");n.jsonPath.query=function(p,s,g){g||(g={});var u=[],q=function(a){return u[a]}.name;if("PATH"==g.resultType&&"RESULT"==g.evalType)throw Error("RESULT based evaluation not supported with PATH based results");var d={resultType:g.resultType||"VALUE",normalize:function(a){var c=[];a=a.replace(/'([^']|'')*'/g,function(a){return q+"("+(u.push(eval(a))-1)+")"});for(var b=-1;b!=c.length;)b=c.length,a=
a.replace(/(\??\([^\(\)]*\))/g,function(a){return"#"+(c.push(a)-1)});a=a.replace(/[\['](#[0-9]+)[\]']/g,"[$1]").replace(/'?\.'?|\['?/g,";").replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"");for(b=-1;b!=a;)b=a,a=a.replace(/#([0-9]+)/g,function(a,b){return c[b]});return a.split(";")},asPaths:function(a){for(var c=0;c<a.length;c++){for(var b="$",d=a[c],r=1,g=d.length;r<g;r++)b+=/^[0-9*]+$/.test(d[r])?"["+d[r]+"]":"['"+d[r]+"']";a[c]=b}return a},exec:function(a,c,b){function k(a,b,c){a&&(a.hasOwnProperty(b)&&
"VALUE"!=d.resultType)&&f.push(h.concat([b]));c?l=a[b]:a&&a.hasOwnProperty(b)&&l.push(a[b])}function g(a){l.push(a);f.push(h);d.walk(a,function(b){if("object"===typeof a[b]){var c=h;h=h.concat(b);g(a[b]);h=c}})}function q(a,b){if(b instanceof Array){var c=b.length,d=0,m=c,e=1;a.replace(/^(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)$/g,function(a,b,c,v){d=parseInt(b||d);m=parseInt(c||m);e=parseInt(v||e)});d=0>d?Math.max(0,d+c):Math.min(c,d);m=0>m?Math.max(0,m+c):Math.min(c,m);for(c=d;c<m;c+=e)k(b,c)}}function n(a){var b=
e.match(/^_str\(([0-9]+)\)$/);return b?u[b[1]]:a}function p(a){if(/^\(.*?\)$/.test(e))k(a,d.eval(e,a),b);else if("*"===e)d.walk(a,b&&a instanceof Array?function(b){d.walk(a[b],function(c){k(a[b],c)})}:function(b){k(a,b)});else if(".."===e)g(a);else if(/,/.test(e))for(var c=e.split(/'?,'?/),f=0,h=c.length;f<h;f++)k(a,n(c[f]));else/^\?\(.*?\)$/.test(e)?d.walk(a,function(b){d.eval(e.replace(/^\?\((.*?)\)$/,"$1"),a[b])&&k(a,b)}):/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(e)?q(e,a):(e=n(e),b&&a instanceof
Array&&!/^[0-9*]+$/.test(e)?d.walk(a,function(b){k(a[b],e)}):k(a,e,b))}for(var h=["$"],l=b?c:[c],f=[h];a.length;){var e=a.shift();if(null===(c=l)||void 0===c)return c;var l=[],s=f,f=[];b?p(c):d.walk(c,function(a){h=s[a]||h;p(c[a])})}if("BOTH"==d.resultType){f=d.asPaths(f);a=[];for(var t=0;t<f.length;t++)a.push({path:f[t],value:l[t]});return a}return"PATH"==d.resultType?d.asPaths(f):l},walk:function(a,c){if(a instanceof Array)for(var b=0,d=a.length;b<d;b++)b in a&&c(b);else if("object"===typeof a)for(b in a)a.hasOwnProperty(b)&&
c(b)},eval:function(a,c){try{return n&&c&&eval(a.replace(/@/g,"v"))}catch(b){throw new SyntaxError("jsonPath: "+b.message+": "+a.replace(/@/g,"v").replace(/\^/g,"_a"));}}},n=p;return s&&p?d.exec(d.normalize(s).slice(1),p,"RESULT"==g.evalType):!1}});
//@ sourceMappingURL=query.js.map