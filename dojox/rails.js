//>>built
define("dojox/rails",["dojo","dijit","dojox","dojo/require!dojo/NodeList-traverse"],function(b,r,h){b.provide("dojox.rails");b.require("dojo.NodeList-traverse");h.rails.live=function(a,f,k){b.isIE&&f.match(/^(on)?submit$/i)?h.rails.live(a,"click",function(a){a=a.target;var d=a.tagName.toLowerCase();if(("input"==d||"button"==d)&&"submit"==b.attr(a,"type").toLowerCase())if(a=b.query(a).closest("form"),a.length)var f=b.connect(a[0],"submit",function(a){b.disconnect(f);k.call(a.target,a)})}):b.connect(b.body(),
f,function(g){var d=b.query(g.target).closest(a);d.length&&k.call(d[0],g)})};b.ready(function(a,f,k){return function(){var g=a.query,d=f.live,h=g("meta[name\x3dcsrf-token]").attr("content"),n=g("meta[name\x3dcsrf-param]").attr("content"),m=function(a,c){return b.place('\x3cform style\x3d"display:none" method\x3d"post" action\x3d"'+a+'"\x3e\x3cinput type\x3d"hidden" name\x3d"_method" value\x3d"'+c+'" /\x3e\x3cinput type\x3d"hidden" name\x3d"'+n+'" value\x3d"'+h+'" /\x3e\x3c/form\x3e',b.body())},p=
function(e){a.forEach(e,function(c){if(!a.attr(c,"disabled")){var e="input"==c.tagName.toLowerCase()?"value":"innerHTML",b=a.attr(c,"data-disable-with"),d=a.attr(c,e);a.attr(c,"disabled",!0);a.attr(c,"data-original-value",d);a.attr(c,e,b)}})},q={text:"text",json:"application/json","json-comment-optional":"text","json-comment-filtered":"text",javascript:"application/javascript",xml:"text/xml"},l=function(e){var c=e.target,b=c.tagName.toLowerCase(),d="form"==b.toLowerCase()?a.formToObject(c):{},g=a.attr(c,
"data-type")||"javascript",f=(a.attr(c,"method")||a.attr(c,"data-method")||"get").toLowerCase(),h=a.attr(c,"action")||a.attr(c,"href");"form"!=b&&"get"!=f&&(c=m(h,f),f="POST");e.preventDefault();a.publish("ajax:before",[c]);a.xhr(f,{url:h,headers:{Accept:q[g]},content:d,handleAs:g,load:function(b,e){a.publish("ajax:success",[c,b,e])},error:function(b,e){a.publish("ajax:failure",[c,b,e])},handle:function(b,e){a.publish("ajax:complete",[c,b,e])}});a.publish("ajax:after",[c])};d("*[data-confirm]","click",
function(b){k.confirm(a.attr(b.target,"data-confirm"))?a.attr(b.target,"data-remote")&&l(b):b.preventDefault()});a.subscribe("ajax:complete",function(b){g("*[data-disable-with][disabled]",b).forEach(function(c){var b="input"==c.tagName.toLowerCase()?"value":"innerHTML",e=a.attr(c,"data-original-value");a.attr(c,"disabled",!1);a.attr(c,"data-original-value",null);a.attr(c,b,e)})});d("a[data-remote]:not([data-confirm])","click",l);d("a[data-method]:not([data-remote])","click",function(a){var c=a.target,
c=m(c.href,b.attr(c,"data-method"));a.preventDefault();c.submit()});d("form","submit",function(b){var c=b.target,d=g("*[data-disable-with]",c);d.length&&p(d);a.attr(c,"data-remote")&&(b.preventDefault(),l(b))})}}(b,h.rails,b.global))});
//@ sourceMappingURL=rails.js.map