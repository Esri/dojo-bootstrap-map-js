//>>built
define("dojox/charting/axis2d/Default","dojo/_base/lang dojo/_base/array dojo/sniff dojo/_base/declare dojo/_base/connect dojo/dom-geometry ./Invisible ../scaler/linear ./common dojox/gfx dojox/lang/utils dojox/lang/functional dojo/has!dojo-bidi?../bidi/axis2d/Default".split(" "),function(B,N,Q,R,S,Z,J,T,V,w,U,O,$){J=R(Q("dojo-bidi")?"dojox.charting.axis2d.NonBidiDefault":"dojox.charting.axis2d.Default",J,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,
fixed:!0,majorLabels:!0,minorTicks:!0,minorLabels:!0,microTicks:!1,rotation:0,htmlLabels:!0,enableCache:!1,dropLabels:!0,labelSizeChange:!1},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",title:"",titleGap:0,titleFont:"",titleFontColor:"",titleOrientation:""},constructor:function(a,c){this.opt=B.clone(this.defaultParams);
U.updateWithObject(this.opt,c);U.updateWithPattern(this.opt,c,this.optionalParams);this.opt.enableCache&&(this._textFreePool=[],this._lineFreePool=[],this._textUsePool=[],this._lineUsePool=[]);this._invalidMaxLabelSize=!0},setWindow:function(a,c){a!=this.scale&&(this._invalidMaxLabelSize=!0);return this.inherited(arguments)},_groupLabelWidth:function(a,c,g){if(!a.length)return 0;50<a.length&&(a.length=50);B.isObject(a[0])&&(a=O.map(a,function(a){return a.text}));g&&(a=O.map(a,function(a){return 0==
B.trim(a).length?"":a.substring(0,g)+this.trailingSymbol},this));a=a.join("\x3cbr\x3e");return w._base._getTextBox(a,{font:c}).w||0},_getMaxLabelSize:function(a,c,g,h,f,k){if(null==this._maxLabelSize&&6==arguments.length){var l=this.opt;this.scaler.minMinorStep=this._prevMinMinorStep=0;var b=B.clone(l);delete b.to;delete b.from;var m=T.buildScaler(a,c,g,b,l.to-l.from);m.minMinorStep=0;this._majorStart=m.major.start;l=T.buildTicks(m,l);if(k&&l){var p=m=0,d=function(a){a.label&&this.push(a.label)},
e=[];this.opt.majorLabels&&(N.forEach(l.major,d,e),m=this._groupLabelWidth(e,f,b.maxLabelCharCount),b.maxLabelSize&&(m=Math.min(b.maxLabelSize,m)));e=[];this.opt.dropLabels&&this.opt.minorLabels&&(N.forEach(l.minor,d,e),p=this._groupLabelWidth(e,f,b.maxLabelCharCount),b.maxLabelSize&&(p=Math.min(b.maxLabelSize,p)));this._maxLabelSize={majLabelW:m,minLabelW:p,majLabelH:k,minLabelH:k}}else this._maxLabelSize=null}return this._maxLabelSize},calculate:function(a,c,g){this.inherited(arguments);this.scaler.minMinorStep=
this._prevMinMinorStep;if((this._invalidMaxLabelSize||g!=this._oldSpan)&&Infinity!=a&&-Infinity!=c){this._invalidMaxLabelSize=!1;this.opt.labelSizeChange&&(this._maxLabelSize=null);this._oldSpan=g;var h=this.opt,f=this.chart.theme.axis,k=h.rotation%360,l=this.chart.theme.axis.tick.labelGap,b=h.font||f.majorTick&&f.majorTick.font||f.tick&&f.tick.font,f=b?w.normalizedLength(w.splitFontString(b).size):0,b=this._getMaxLabelSize(a,c,g,k,b,f);"number"!=typeof l&&(l=4);if(b&&h.dropLabels){var h=Math.abs(Math.cos(k*
Math.PI/180)),m=Math.abs(Math.sin(k*Math.PI/180));0>k&&(k+=360);switch(k){case 0:case 180:this.vertical?k=f:(k=b.majLabelW,f=b.minLabelW);break;case 90:case 270:this.vertical?(k=b.majLabelW,f=b.minLabelW):k=f;break;default:var k=this.vertical?Math.min(b.majLabelW,f/h):Math.min(b.majLabelW,f/m),p=Math.sqrt(b.minLabelW*b.minLabelW+f*f),f=Math.min(p,this.vertical?f*h+b.minLabelW*m:b.minLabelW*h+f*m)}this.scaler.minMinorStep=this._prevMinMinorStep=Math.max(k,f)+l;this._skipInterval=this.scaler.minMinorStep<=
this.scaler.minor.tick*this.scaler.bounds.scale?0:Math.floor((k+l)/(this.scaler.major.tick*this.scaler.bounds.scale))}else this._skipInterval=0}this.ticks=T.buildTicks(this.scaler,this.opt);return this},getOffsets:function(){var a={l:0,r:0,t:0,b:0};if(!this.scaler)return a;var c=this.opt,g=this.chart.theme.axis,h=this.chart.theme.axis.tick.labelGap,f=c.titleFont||g.title&&g.title.font,g=0==c.titleGap?0:c.titleGap||g.title&&g.title.gap,k=this.chart.theme.getTick("major",c),l=this.chart.theme.getTick("minor",
c),f=f?w.normalizedLength(w.splitFontString(f).size):0,b=c.rotation%360,m=c.leftBottom,p=Math.abs(Math.cos(b*Math.PI/180)),d=Math.abs(Math.sin(b*Math.PI/180));this.trailingSymbol=void 0===c.trailingSymbol||null===c.trailingSymbol?this.trailingSymbol:c.trailingSymbol;"number"!=typeof h&&(h=4);0>b&&(b+=360);var e=this._getMaxLabelSize();if(e){var s=Math.ceil(Math.max(e.majLabelW,e.minLabelW))+1,n=Math.ceil(Math.max(e.majLabelH,e.minLabelH))+1;if(this.vertical)switch(e=m?"l":"r",b){case 0:case 180:a[e]=
s;a.t=a.b=n/2;break;case 90:case 270:a[e]=n;a.t=a.b=s/2;break;default:45>=b||180<b&&225>=b?(a[e]=n*d/2+s*p,a[m?"t":"b"]=n*p/2+s*d,a[m?"b":"t"]=n*p/2):315<b||180>b&&135<b?(a[e]=n*d/2+s*p,a[m?"b":"t"]=n*p/2+s*d,a[m?"t":"b"]=n*p/2):90>b||180<b&&270>b?(a[e]=n*d+s*p,a[m?"t":"b"]=n*p+s*d):(a[e]=n*d+s*p,a[m?"b":"t"]=n*p+s*d)}else switch(e=m?"b":"t",b){case 0:case 180:a[e]=n;a.l=a.r=s/2;break;case 90:case 270:a[e]=s;a.l=a.r=n/2;break;default:45<=b&&90>=b||225<=b&&270>=b?(a[e]=n*p/2+s*d,a[m?"r":"l"]=n*d/2+
s*p,a[m?"l":"r"]=n*d/2):90<=b&&135>=b||270<=b&&315>=b?(a[e]=n*p/2+s*d,a[m?"l":"r"]=n*d/2+s*p,a[m?"r":"l"]=n*d/2):45>b||180<b&&225>b?(a[e]=n*p+s*d,a[m?"r":"l"]=n*d+s*p):(a[e]=n*p+s*d,a[m?"l":"r"]=n*d+s*p)}a[e]+=h+Math.max(0<k.length?k.length:0,0<l.length?l.length:0)+(c.title?f+g:0)}return a},cleanGroup:function(a){this.opt.enableCache&&this.group&&(this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[],this._textFreePool=this._textFreePool.concat(this._textUsePool),this._textUsePool=
[]);this.inherited(arguments)},createText:function(a,c,g,h,f,k,l,b,m){if(!this.opt.enableCache||"html"==a)return V.createText[a](this.chart,c,g,h,f,k,l,b,m);0<this._textFreePool.length?(a=this._textFreePool.pop(),a.setShape({x:g,y:h,text:k,align:f}),c.add(a)):a=V.createText[a](this.chart,c,g,h,f,k,l,b);this._textUsePool.push(a);return a},createLine:function(a,c){var g;this.opt.enableCache&&0<this._lineFreePool.length?(g=this._lineFreePool.pop(),g.setShape(c),a.add(g)):g=a.createLine(c);this.opt.enableCache&&
this._lineUsePool.push(g);return g},render:function(a,c){var g,h,f,k,l,b,m,p,d,e,s,n,H,I,B=this._isRtl();if(!this.dirty||!this.scaler)return this;var t=this.opt;d=this.chart.theme.axis;var y=t.leftBottom,r=t.rotation%360,v=0,E,q,v=this.chart.theme.axis.tick.labelGap,C=t.font||d.majorTick&&d.majorTick.font||d.tick&&d.tick.font,L=t.titleFont||d.title&&d.title.font,J=t.fontColor||d.majorTick&&d.majorTick.fontColor||d.tick&&d.tick.fontColor||"black",R=t.titleFontColor||d.title&&d.title.fontColor||"black";
l=0==t.titleGap?0:t.titleGap||d.title&&d.title.gap||15;var x=t.titleOrientation||d.title&&d.title.orientation||"axis",z=this.chart.theme.getTick("major",t),A=this.chart.theme.getTick("minor",t),W=this.chart.theme.getTick("micro",t),S="stroke"in t?t.stroke:d.stroke,u=C?w.normalizedLength(w.splitFontString(C).size):0;b=Math.abs(Math.cos(r*Math.PI/180));E=Math.abs(Math.sin(r*Math.PI/180));var M=L?w.normalizedLength(w.splitFontString(L).size):0;"number"!=typeof v&&(v=4);0>r&&(r+=360);var P=this._getMaxLabelSize(),
P=P&&P.majLabelW;if(this.vertical){H=a.height-c.b;I=void 0;s=c.t;n=void 0;d=(a.height-c.b+c.t)/2;e=void 0;E=u*E+(P||0)*b+v+Math.max(0<z.length?z.length:0,0<A.length?A.length:0)+M+l;m=0;p=-1;h=g=0;l=1;b=0;f=v;k=0;switch(r){case 0:q="end";h=0.4*u;break;case 90:q="middle";g=-u;break;case 180:q="start";h=0.4*-u;break;case 270:q="middle";break;default:45>r?(q="end",h=0.4*u):90>r?(q="end",h=0.4*u):135>r?q="start":225>r?(q="start",h=0.4*-u):270>r?(q="start",g=y?0:0.4*u):315>r?(q="end",g=y?0:0.4*u):(q="end",
h=0.4*u)}if(y)I=n=c.l,v=x&&"away"==x?90:270,e=c.l-E+(270==v?M:0),l=-1,f=-f;else switch(I=n=a.width-c.r,v=x&&"axis"==x?90:270,e=a.width-c.r+E-(270==v?0:M),q){case "start":q="end";break;case "end":q="start";break;case "middle":g+=u}}else{I=c.l;H=void 0;n=a.width-c.r;s=void 0;e=(a.width-c.r+c.l)/2;d=void 0;E=u*b+(P||0)*E+v+Math.max(0<z.length?z.length:0,0<A.length?A.length:0)+M+l;m=B?-1:1;l=h=g=p=0;b=1;f=0;k=v;switch(r){case 0:q="middle";h=u;break;case 90:q="start";g=0.4*-u;break;case 180:q="middle";
break;case 270:q="end";g=0.4*u;break;default:45>r?(q="start",h=y?u:0):135>r?(q="start",g=0.4*-u):180>r?(q="start",h=y?0:-u):225>r?(q="end",h=y?0:-u):315>r?(q="end",h=y?0.4*u:0):(q="end",h=y?u:0)}if(y)H=s=a.height-c.b,v=x&&"axis"==x?180:0,d=a.height-c.b+E-(v?M:0);else switch(H=s=c.t,v=x&&"away"==x?180:0,d=c.t-E+(v?0:M),b=-1,k=-k,q){case "start":q="end";break;case "end":q="start";break;case "middle":h-=u}}this.cleanGroup();var K=this.group,y=this.scaler,x=this.ticks,X=T.getTransformerFromModel(this.scaler),
D=(!t.title||!v)&&!r&&this.opt.htmlLabels&&!Q("ie")&&!Q("opera")?"html":"gfx",F=l*z.length,G=b*z.length,Y=this._skipInterval;K.createLine({x1:I,y1:H,x2:n,y2:s}).setStroke(S);t.title&&(L=V.createText[D](this.chart,K,e,d,"middle",t.title,L,R),"html"==D?this.htmlElements.push(L):L.setTransform(w.matrix.rotategAt(v,e,d)));if(null==x)return this.dirty=!1,this;var U=0<x.major.length?(x.major[0].value-this._majorStart)/y.major.tick:0,O=this.opt.majorLabels;N.forEach(x.major,function(a,b){var d=X(a.value),
c=(B?n:I)+m*d,l=H+p*d;b+=U;this.createLine(K,{x1:c,y1:l,x2:c+F,y2:l+G}).setStroke(z);if(a.label&&(!Y||0==(b-(1+Y))%(1+Y))){var e=t.maxLabelCharCount?this.getTextWithLimitCharCount(a.label,C,t.maxLabelCharCount):{text:a.label,truncated:!1},e=t.maxLabelSize?this.getTextWithLimitLength(e.text,C,t.maxLabelSize,e.truncated):e,d=this.createText(D,K,c+(0<z.length?F:0)+f+(r?0:g),l+(0<z.length?G:0)+k+(r?0:h),q,e.text,C,J);e.truncated&&this.chart.formatTruncatedLabel(d,a.label,D);e.truncated&&this.labelTooltip(d,
this.chart,a.label,e.text,C,D);"html"==D?this.htmlElements.push(d):r&&d.setTransform([{dx:g,dy:h},w.matrix.rotategAt(r,c+(0<z.length?F:0)+f,l+(0<z.length?G:0)+k)])}},this);F=l*A.length;G=b*A.length;O=this.opt.minorLabels&&y.minMinorStep<=y.minor.tick*y.bounds.scale;N.forEach(x.minor,function(a){var b=X(a.value),d=(B?n:I)+m*b,c=H+p*b;this.createLine(K,{x1:d,y1:c,x2:d+F,y2:c+G}).setStroke(A);if(O&&a.label){var e=t.maxLabelCharCount?this.getTextWithLimitCharCount(a.label,C,t.maxLabelCharCount):{text:a.label,
truncated:!1},e=t.maxLabelSize?this.getTextWithLimitLength(e.text,C,t.maxLabelSize,e.truncated):e,b=this.createText(D,K,d+(0<A.length?F:0)+f+(r?0:g),c+(0<A.length?G:0)+k+(r?0:h),q,e.text,C,J);e.truncated&&this.chart.formatTruncatedLabel(b,a.label,D);e.truncated&&this.labelTooltip(b,this.chart,a.label,e.text,C,D);"html"==D?this.htmlElements.push(b):r&&b.setTransform([{dx:g,dy:h},w.matrix.rotategAt(r,d+(0<A.length?F:0)+f,c+(0<A.length?G:0)+k)])}},this);F=l*W.length;G=b*W.length;N.forEach(x.micro,function(a){var b=
X(a.value);a=I+m*b;b=H+p*b;this.createLine(K,{x1:a,y1:b,x2:a+F,y2:b+G}).setStroke(W)},this);this.dirty=!1;return this},labelTooltip:function(a,c,g,h,f,k){var l=["dijit/Tooltip"],b={type:"rect"},m=["above","below"];h=w._base._getTextBox(h,{font:f}).w||0;f=f?w.normalizedLength(w.splitFontString(f).size):0;"html"==k?(B.mixin(b,Z.position(a.firstChild,!0)),b.width=Math.ceil(h),b.height=Math.ceil(f),this._events.push({shape:dojo,handle:S.connect(a.firstChild,"onmouseover",this,function(a){require(l,function(a){a.show(g,
b,m)})})}),this._events.push({shape:dojo,handle:S.connect(a.firstChild,"onmouseout",this,function(a){require(l,function(a){a.hide(b)})})})):(k=a.getShape(),c=c.getCoords(),b=B.mixin(b,{x:k.x-h/2,y:k.y}),b.x+=c.x,b.y+=c.y,b.x=Math.round(b.x),b.y=Math.round(b.y),b.width=Math.ceil(h),b.height=Math.ceil(f),this._events.push({shape:a,handle:a.connect("onmouseenter",this,function(a){require(l,function(a){a.show(g,b,m)})})}),this._events.push({shape:a,handle:a.connect("onmouseleave",this,function(a){require(l,
function(a){a.hide(b)})})}))},_isRtl:function(){return!1}});return Q("dojo-bidi")?R("dojox.charting.axis2d.Default",[J,$]):J});
//@ sourceMappingURL=Default.js.map