//>>built
define("dojox/charting/plot2d/Candlesticks","dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/functional/reversed dojox/lang/utils dojox/gfx/fx".split(" "),function(r,x,C,H,y,z,D,I,J,u,K){var L=J.lambda("item.purgeGroup()");return x("dojox.charting.plot2d.Candlesticks",[y,z],{defaultParams:{gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(a,
b){this.opt=r.clone(this.defaultParams);u.updateWithObject(this.opt,b);u.updateWithPattern(this.opt,b,this.optionalParams);this.animate=this.opt.animate},collectStats:function(a){for(var b=r.delegate(D.defaultStats),g=0;g<a.length;g++){var c=a[g];if(c.data.length){var d=b.vmin,v=b.vmax;(!("ymin"in c)||!("ymax"in c))&&C.forEach(c.data,function(a,d){if(null!==a){var c=a.x||d+1;b.hmin=Math.min(b.hmin,c);b.hmax=Math.max(b.hmax,c);b.vmin=Math.min(b.vmin,a.open,a.close,a.high,a.low);b.vmax=Math.max(b.vmax,
a.open,a.close,a.high,a.low)}});"ymin"in c&&(b.vmin=Math.min(d,c.ymin));"ymax"in c&&(b.vmax=Math.max(v,c.ymax))}}return b},getSeriesStats:function(){var a=this.collectStats(this.series);a.hmin-=0.5;a.hmax+=0.5;return a},render:function(a,b){if(this.zoom&&!this.isDataDirty())return this.performZoom(a,b);this.resetEvents();this.dirty=this.isDirty();var g;this.dirty&&(C.forEach(this.series,L),this._eventSeries={},this.cleanGroup(),g=this.getGroup(),I.forEachRev(this.series,function(a){a.cleanGroup(g)}));
var c=this.chart.theme,d,v,r=this._hScaler.scaler.getTransformerFromModel(this._hScaler),s=this._vScaler.scaler.getTransformerFromModel(this._vScaler),u=this.events();d=D.calculateBarSize(this._hScaler.bounds.scale,this.opt);v=d.gap;d=d.size;for(var A=this.series.length-1;0<=A;--A){var f=this.series[A];if(!this.dirty&&!f.dirty)c.skip(),this._reconnectEvents(f.name);else{f.cleanGroup();g=f.group;for(var x=c.next("candlestick",[this.opt,f]),E=Array(f.data.length),p=0;p<f.data.length;++p){var e=f.data[p];
if(null!==e){var l=c.addMixin(x,"candlestick",e,!0),F=r(e.x||p+0.5)+b.l+v,m=a.height-b.b,h=s(e.open),k=s(e.close),t=s(e.high),q=s(e.low);if("mid"in e)var G=s(e.mid);if(q>t)var n=t,t=q,q=n;if(1<=d){var n=h>k,y={x1:d/2,x2:d/2,y1:m-t,y2:m-q},z={x:0,y:m-Math.max(h,k),width:d,height:Math.max(n?h-k:k-h,1)},B=g.createGroup();B.setTransform({dx:F,dy:0});var w=B.createGroup();w.createLine(y).setStroke(l.series.stroke);w.createRect(z).setStroke(l.series.stroke).setFill(n?l.series.fill:"white");"mid"in e&&w.createLine({x1:l.series.stroke.width||
1,x2:d-(l.series.stroke.width||1),y1:m-G,y2:m-G}).setStroke(n?"white":l.series.stroke);f.dyn.fill=l.series.fill;f.dyn.stroke=l.series.stroke;u&&(e={element:"candlestick",index:p,run:f,shape:w,x:F,y:m-Math.max(h,k),cx:d/2,cy:m-Math.max(h,k)+Math.max(n?h-k:k-h,1)/2,width:d,height:Math.max(n?h-k:k-h,1),data:e},this._connectEvents(e),E[p]=e)}this.animate&&this._animateCandlesticks(B,m-q,t-q)}}this._eventSeries[f.name]=E;f.dirty=!1}}this.dirty=!1;H("dojo-bidi")&&this._checkOrientation(this.group,a,b);
return this},tooltipFunc:function(a){return'\x3ctable cellpadding\x3d"1" cellspacing\x3d"0" border\x3d"0" style\x3d"font-size:0.9em;"\x3e\x3ctr\x3e\x3ctd\x3eOpen:\x3c/td\x3e\x3ctd align\x3d"right"\x3e\x3cstrong\x3e'+a.data.open+'\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3eHigh:\x3c/td\x3e\x3ctd align\x3d"right"\x3e\x3cstrong\x3e'+a.data.high+'\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3eLow:\x3c/td\x3e\x3ctd align\x3d"right"\x3e\x3cstrong\x3e'+a.data.low+'\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3eClose:\x3c/td\x3e\x3ctd align\x3d"right"\x3e\x3cstrong\x3e'+
a.data.close+"\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e"+(void 0!==a.data.mid?'\x3ctr\x3e\x3ctd\x3eMid:\x3c/td\x3e\x3ctd align\x3d"right"\x3e\x3cstrong\x3e'+a.data.mid+"\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e":"")+"\x3c/table\x3e"},_animateCandlesticks:function(a,b,g){K.animateTransform(r.delegate({shape:a,duration:1200,transform:[{name:"translate",start:[0,b-b/g],end:[0,0]},{name:"scale",start:[1,1/g],end:[1,1]},{name:"original"}]},this.animate)).play()}})});
//@ sourceMappingURL=Candlesticks.js.map